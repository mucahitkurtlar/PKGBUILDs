# Maintainer: Mücahit Kurtlar
# Contributor: Mücahit Kurtlar

pkgname=simplenote-bin
_pkgname=simplenote
pkgver=2.22.2
pkgrel=1
pkgdesc="The simplest way to keep notes."
arch=('x86_64')
url="https://simplenote.com/"
license=('GPL2')
depends=(fuse2)
provides=(simplenote)
conflicts=(simplenote-electron-bin)
options=('!strip')
source=("simplenote.desktop"
        "https://raw.githubusercontent.com/Automattic/simplenote-electron/trunk/resources/images/simplenote.ico")
source_x86_64=("https://github.com/Automattic/simplenote-electron/releases/download/v${pkgver}/Simplenote-linux-${pkgver}-${CARCH}.AppImage")
sha256sums=('41c5cf2e0e179627aed5dea4fd5a64a70a9a8ee1205a6bf40df03bfd4df6aa97'
            '81f1acac7a50fa9e255cc4b7c67d5e99499eed12ecdf5f8e96961602249aebc5')
sha256sums_x86_64=('fca24bd09c3077577f0d0deeb6cbb5a2312c37842e31d438f86b839d33d965cb')

package() {
    install -d "${pkgdir}/usr/bin"
    install -d "${pkgdir}/usr/share/applications"

    install -D -t "${pkgdir}/opt/${_pkgname}" -m 755 "${srcdir}/Simplenote-linux-${pkgver}-${CARCH}.AppImage"
    install -D -t "${pkgdir}/opt/${_pkgname}/resources" -m 644 "${srcdir}/simplenote.ico"
    install -D -t "${pkgdir}/opt/${_pkgname}/resources" -m 644 "${srcdir}/simplenote.desktop"

    ln -s "/opt/${_pkgname}/Simplenote-linux-${pkgver}-${CARCH}.AppImage" "${pkgdir}/usr/bin/simplenote"
    ln -s "/opt/${_pkgname}/resources/simplenote.desktop" "${pkgdir}/usr/share/applications/simplenote.desktop"
}
